version: '3'

tasks:
  migrate:
    cmds:
      - poetry run python manage.py migrate

  collectstatic:
    cmds:
      - poetry run python manage.py collectstatic

  test:
    cmds:
      - poetry run python manage.py test

  run-dev-server:
    cmds:
      - poetry run python manage.py runserver

  run-prod-server:
    cmds:
      - poetry run gunicorn -b 0.0.0.0:8000 sampleproject.wsgi

  run-prod-server-migrate:
    cmds:
      - poetry run gunicorn -b 0.0.0.0:8000 sampleproject.wsgi
      - poetry run python manage.py migrate
